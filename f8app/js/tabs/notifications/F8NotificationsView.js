/**
 * Copyright 2016 Facebook, Inc.
 *
 * You are hereby granted a non-exclusive, worldwide, royalty-free license to
 * use, copy, modify, and distribute this software in source code or binary
 * form for use in connection with the web services and APIs provided by
 * Facebook.
 *
 * As with any software that integrates with the Facebook platform, your use
 * of this software is subject to the Facebook Developer Principles and
 * Policies [http://developers.facebook.com/policy/]. This copyright notice
 * shall be included in all copies or substantial portions of the software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE
 *
 * @providesModule F8NotificationsView
 * @flow
 */'use strict';var cov_23x0gbstu1=function(){var path='tabs/notifications/F8NotificationsView.js',hash='51e5aeefbe3d7c93bfc0a6ffcc729a71346b31a2',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'tabs/notifications/F8NotificationsView.js',statementMap:{'0':{start:{line:27,column:20},end:{line:27,column:56}},'1':{start:{line:28,column:14},end:{line:28,column:32}},'2':{start:{line:29,column:19},end:{line:29,column:44}},'3':{start:{line:30,column:19},end:{line:30,column:55}},'4':{start:{line:31,column:12},end:{line:31,column:28}},'5':{start:{line:32,column:15},end:{line:32,column:34}},'6':{start:{line:33,column:21},end:{line:33,column:46}},'7':{start:{line:34,column:20},end:{line:34,column:44}},'8':{start:{line:35,column:23},end:{line:35,column:52}},'9':{start:{line:36,column:23},end:{line:36,column:52}},'10':{start:{line:37,column:23},end:{line:37,column:52}},'11':{start:{line:38,column:11},end:{line:38,column:26}},'12':{start:{line:39,column:23},end:{line:39,column:50}},'13':{start:{line:40,column:18},end:{line:40,column:40}},'14':{start:{line:45,column:4},end:{line:45,column:28}},'15':{start:{line:46,column:33},end:{line:46,column:53}},'16':{start:{line:48,column:25},end:{line:48,column:44}},'17':{start:{line:50,column:13},end:{line:61,column:1}},'18':{start:{line:52,column:13},end:{line:52,column:26}},'19':{start:{line:53,column:13},end:{line:53,column:40}},'20':{start:{line:55,column:30},end:{line:55,column:32}},'21':{start:{line:56,column:4},end:{line:58,column:5}},'22':{start:{line:57,column:6},end:{line:57,column:49}},'23':{start:{line:59,column:4},end:{line:59,column:40}},'24':{start:{line:66,column:4},end:{line:66,column:17}},'25':{start:{line:68,column:4},end:{line:68,column:54}},'26':{start:{line:69,column:4},end:{line:69,column:66}},'27':{start:{line:70,column:4},end:{line:70,column:68}},'28':{start:{line:71,column:4},end:{line:71,column:56}},'29':{start:{line:76,column:4},end:{line:83,column:5}},'30':{start:{line:77,column:6},end:{line:82,column:8}},'31':{start:{line:85,column:4},end:{line:100,column:6}},'32':{start:{line:104,column:4},end:{line:111,column:5}},'33':{start:{line:105,column:6},end:{line:110,column:8}},'34':{start:{line:112,column:4},end:{line:118,column:6}},'35':{start:{line:116,column:23},end:{line:116,column:58}},'36':{start:{line:122,column:4},end:{line:127,column:6}},'37':{start:{line:131,column:4},end:{line:138,column:5}},'38':{start:{line:132,column:20},end:{line:132,column:75}},'39':{start:{line:133,column:6},end:{line:137,column:7}},'40':{start:{line:134,column:8},end:{line:134,column:45}},'41':{start:{line:136,column:8},end:{line:136,column:42}},'42':{start:{line:142,column:4},end:{line:145,column:7}},'43':{start:{line:149,column:4},end:{line:151,column:5}},'44':{start:{line:150,column:6},end:{line:150,column:16}},'45':{start:{line:153,column:4},end:{line:160,column:5}},'46':{start:{line:154,column:6},end:{line:159,column:8}},'47':{start:{line:157,column:25},end:{line:157,column:44}},'48':{start:{line:162,column:4},end:{line:169,column:5}},'49':{start:{line:163,column:6},end:{line:168,column:8}},'50':{start:{line:164,column:59},end:{line:167,column:9}},'51':{start:{line:166,column:25},end:{line:166,column:64}},'52':{start:{line:173,column:23},end:{line:173,column:45}},'53':{start:{line:174,column:4},end:{line:186,column:6}},'54':{start:{line:179,column:8},end:{line:181,column:9}},'55':{start:{line:180,column:10},end:{line:180,column:17}},'56':{start:{line:183,column:28},end:{line:183,column:58}},'57':{start:{line:184,column:8},end:{line:184,column:38}},'58':{start:{line:191,column:2},end:{line:196,column:4}},'59':{start:{line:200,column:2},end:{line:204,column:4}},'60':{start:{line:201,column:33},end:{line:201,column:68}},'61':{start:{line:202,column:31},end:{line:202,column:64}},'62':{start:{line:207,column:0},end:{line:207,column:63}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:13},end:{line:52,column:26}},line:52},'1':{name:'(anonymous_1)',decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:13},end:{line:53,column:40}},line:53},'2':{name:'(anonymous_2)',decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:39},end:{line:60,column:3}},line:54},'3':{name:'(anonymous_3)',decl:{start:{line:65,column:2},end:{line:65,column:3}},loc:{start:{line:65,column:21},end:{line:72,column:3}},line:65},'4':{name:'(anonymous_4)',decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:11},end:{line:101,column:3}},line:74},'5':{name:'(anonymous_5)',decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:26},end:{line:119,column:3}},line:103},'6':{name:'(anonymous_6)',decl:{start:{line:116,column:17},end:{line:116,column:18}},loc:{start:{line:116,column:23},end:{line:116,column:58}},line:116},'7':{name:'(anonymous_7)',decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:20},end:{line:128,column:3}},line:121},'8':{name:'(anonymous_8)',decl:{start:{line:130,column:2},end:{line:130,column:3}},loc:{start:{line:130,column:33},end:{line:139,column:3}},line:130},'9':{name:'(anonymous_9)',decl:{start:{line:141,column:2},end:{line:141,column:3}},loc:{start:{line:141,column:15},end:{line:146,column:3}},line:141},'10':{name:'(anonymous_10)',decl:{start:{line:148,column:2},end:{line:148,column:3}},loc:{start:{line:148,column:20},end:{line:170,column:3}},line:148},'11':{name:'(anonymous_11)',decl:{start:{line:157,column:19},end:{line:157,column:20}},loc:{start:{line:157,column:25},end:{line:157,column:44}},line:157},'12':{name:'(anonymous_12)',decl:{start:{line:164,column:47},end:{line:164,column:48}},loc:{start:{line:164,column:59},end:{line:167,column:9}},line:164},'13':{name:'(anonymous_13)',decl:{start:{line:166,column:19},end:{line:166,column:20}},loc:{start:{line:166,column:25},end:{line:166,column:64}},line:166},'14':{name:'(anonymous_14)',decl:{start:{line:172,column:2},end:{line:172,column:3}},loc:{start:{line:172,column:17},end:{line:187,column:3}},line:172},'15':{name:'(anonymous_15)',decl:{start:{line:178,column:7},end:{line:178,column:8}},loc:{start:{line:178,column:16},end:{line:185,column:7}},line:178},'16':{name:'select',decl:{start:{line:190,column:9},end:{line:190,column:15}},loc:{start:{line:190,column:23},end:{line:197,column:1}},line:190},'17':{name:'actions',decl:{start:{line:199,column:9},end:{line:199,column:16}},loc:{start:{line:199,column:27},end:{line:205,column:1}},line:199},'18':{name:'(anonymous_18)',decl:{start:{line:201,column:27},end:{line:201,column:28}},loc:{start:{line:201,column:33},end:{line:201,column:68}},line:201},'19':{name:'(anonymous_19)',decl:{start:{line:202,column:25},end:{line:202,column:26}},loc:{start:{line:202,column:31},end:{line:202,column:64}},line:202}},branchMap:{'0':{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:'if',locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:56,column:4},end:{line:58,column:5}}],line:56},'1':{loc:{start:{line:76,column:4},end:{line:83,column:5}},type:'if',locations:[{start:{line:76,column:4},end:{line:83,column:5}},{start:{line:76,column:4},end:{line:83,column:5}}],line:76},'2':{loc:{start:{line:104,column:4},end:{line:111,column:5}},type:'if',locations:[{start:{line:104,column:4},end:{line:111,column:5}},{start:{line:104,column:4},end:{line:111,column:5}}],line:104},'3':{loc:{start:{line:131,column:4},end:{line:138,column:5}},type:'if',locations:[{start:{line:131,column:4},end:{line:138,column:5}},{start:{line:131,column:4},end:{line:138,column:5}}],line:131},'4':{loc:{start:{line:133,column:6},end:{line:137,column:7}},type:'if',locations:[{start:{line:133,column:6},end:{line:137,column:7}},{start:{line:133,column:6},end:{line:137,column:7}}],line:133},'5':{loc:{start:{line:149,column:4},end:{line:151,column:5}},type:'if',locations:[{start:{line:149,column:4},end:{line:151,column:5}},{start:{line:149,column:4},end:{line:151,column:5}}],line:149},'6':{loc:{start:{line:153,column:4},end:{line:160,column:5}},type:'if',locations:[{start:{line:153,column:4},end:{line:160,column:5}},{start:{line:153,column:4},end:{line:160,column:5}}],line:153},'7':{loc:{start:{line:162,column:4},end:{line:169,column:5}},type:'if',locations:[{start:{line:162,column:4},end:{line:169,column:5}},{start:{line:162,column:4},end:{line:169,column:5}}],line:162},'8':{loc:{start:{line:179,column:8},end:{line:181,column:9}},type:'if',locations:[{start:{line:179,column:8},end:{line:181,column:9}},{start:{line:179,column:8},end:{line:181,column:9}}],line:179}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var EmptySchedule=(++cov_23x0gbstu1.s[0],require('../schedule/EmptySchedule'));var Linking=(++cov_23x0gbstu1.s[1],require('Linking'));var PushNUXModal=(++cov_23x0gbstu1.s[2],require('./PushNUXModal'));var PureListView=(++cov_23x0gbstu1.s[3],require('../../common/PureListView'));var React=(++cov_23x0gbstu1.s[4],require('React'));var Platform=(++cov_23x0gbstu1.s[5],require('Platform'));var ActionSheetIOS=(++cov_23x0gbstu1.s[6],require('ActionSheetIOS'));var ListContainer=(++cov_23x0gbstu1.s[7],require('ListContainer'));var NotificationCell=(++cov_23x0gbstu1.s[8],require('./NotificationCell'));var RateSessionsCell=(++cov_23x0gbstu1.s[9],require('./RateSessionsCell'));var allNotifications=(++cov_23x0gbstu1.s[10],require('./allNotifications'));var View=(++cov_23x0gbstu1.s[11],require('View'));var findSessionByURI=(++cov_23x0gbstu1.s[12],require('findSessionByURI'));var{connect}=(++cov_23x0gbstu1.s[13],require('react-redux'));var{turnOnPushNotifications,skipPushNotifications,TEST_MENU}=(++cov_23x0gbstu1.s[14],require('../../actions'));var{testMenuEnabled,version}=(++cov_23x0gbstu1.s[15],require('../../env'));var{createSelector}=(++cov_23x0gbstu1.s[16],require('reselect'));const data=(++cov_23x0gbstu1.s[17],createSelector(allNotifications,store=>{++cov_23x0gbstu1.f[0];++cov_23x0gbstu1.s[18];return store.surveys;},store=>{++cov_23x0gbstu1.f[1];++cov_23x0gbstu1.s[19];return store.notifications.enabled;},(notifications,surveys,enabled)=>{++cov_23x0gbstu1.f[2];const extra:Array<any>=(++cov_23x0gbstu1.s[20],[]);++cov_23x0gbstu1.s[21];if(surveys.length>0){++cov_23x0gbstu1.b[0][0];++cov_23x0gbstu1.s[22];extra.push({surveysCount:surveys.length});}else{++cov_23x0gbstu1.b[0][1];}++cov_23x0gbstu1.s[23];return[...extra,...notifications];}));class F8NotificationsView extends React.Component{constructor(props){++cov_23x0gbstu1.f[3];++cov_23x0gbstu1.s[24];super(props);++cov_23x0gbstu1.s[25];(this:any).renderRow=this.renderRow.bind(this);++cov_23x0gbstu1.s[26];(this:any).renderEmptyList=this.renderEmptyList.bind(this);++cov_23x0gbstu1.s[27];(this:any).openNotification=this.openNotification.bind(this);++cov_23x0gbstu1.s[28];(this:any).openReview=this.openReview.bind(this);}render(){++cov_23x0gbstu1.f[4];var modal;++cov_23x0gbstu1.s[29];if(this.props.nux){++cov_23x0gbstu1.b[1][0];++cov_23x0gbstu1.s[30];modal=<PushNUXModal onTurnOnNotifications={this.props.onTurnOnNotifications}onSkipNotifications={this.props.onSkipNotifications}/>;}else{++cov_23x0gbstu1.b[1][1];}++cov_23x0gbstu1.s[31];return<View style={{flex:1}}>
        <ListContainer title="Notifications"backgroundImage={require('./img/notifications-background.png')}backgroundColor={'#E78196'}{...this.renderTestItems()}>
          <PureListView data={this.props.notifications}renderEmptyList={this.renderEmptyList}renderRow={this.renderRow}/>
        </ListContainer>
        {modal}
      </View>;}renderRow(notification){++cov_23x0gbstu1.f[5];++cov_23x0gbstu1.s[32];if(notification.surveysCount){++cov_23x0gbstu1.b[2][0];++cov_23x0gbstu1.s[33];return<RateSessionsCell numberOfSessions={notification.surveysCount}onPress={this.openReview}/>;}else{++cov_23x0gbstu1.b[2][1];}++cov_23x0gbstu1.s[34];return<NotificationCell key={notification.id}notification={notification}onPress={()=>{++cov_23x0gbstu1.f[6];++cov_23x0gbstu1.s[35];return this.openNotification(notification);}}/>;}renderEmptyList(){++cov_23x0gbstu1.f[7];++cov_23x0gbstu1.s[36];return<EmptySchedule title="No Notifications Yet"text="Important updates and announcements will appear here"/>;}openNotification(notification){++cov_23x0gbstu1.f[8];++cov_23x0gbstu1.s[37];if(notification.url){++cov_23x0gbstu1.b[3][0];var session=(++cov_23x0gbstu1.s[38],findSessionByURI(this.props.sessions,notification.url));++cov_23x0gbstu1.s[39];if(session){++cov_23x0gbstu1.b[4][0];++cov_23x0gbstu1.s[40];this.props.navigator.push({session});}else{++cov_23x0gbstu1.b[4][1];++cov_23x0gbstu1.s[41];Linking.openURL(notification.url);}}else{++cov_23x0gbstu1.b[3][1];}}openReview(){++cov_23x0gbstu1.f[9];++cov_23x0gbstu1.s[42];this.props.navigator.push({rate:1,surveys:this.props.surveys});}renderTestItems(){++cov_23x0gbstu1.f[10];++cov_23x0gbstu1.s[43];if(!testMenuEnabled){++cov_23x0gbstu1.b[5][0];++cov_23x0gbstu1.s[44];return{};}else{++cov_23x0gbstu1.b[5][1];}++cov_23x0gbstu1.s[45];if(Platform.OS==='ios'){++cov_23x0gbstu1.b[6][0];++cov_23x0gbstu1.s[46];return{rightItem:{title:'Test',onPress:()=>{++cov_23x0gbstu1.f[11];++cov_23x0gbstu1.s[47];return this.showTestMenu();}}};}else{++cov_23x0gbstu1.b[6][1];}++cov_23x0gbstu1.s[48];if(Platform.OS==='android'){++cov_23x0gbstu1.b[7][0];++cov_23x0gbstu1.s[49];return{extraItems:Object.keys(TEST_MENU).map(title=>{++cov_23x0gbstu1.f[12];++cov_23x0gbstu1.s[50];return{title,onPress:()=>{++cov_23x0gbstu1.f[13];++cov_23x0gbstu1.s[51];return this.props.dispatch(TEST_MENU[title]());}};})};}else{++cov_23x0gbstu1.b[7][1];}}showTestMenu(){++cov_23x0gbstu1.f[14];const itemTitles=(++cov_23x0gbstu1.s[52],Object.keys(TEST_MENU));++cov_23x0gbstu1.s[53];ActionSheetIOS.showActionSheetWithOptions({title:'Testing F8 app v'+version,options:['Cancel',...itemTitles],cancelButtonIndex:0},idx=>{++cov_23x0gbstu1.f[15];++cov_23x0gbstu1.s[54];if(idx===0){++cov_23x0gbstu1.b[8][0];++cov_23x0gbstu1.s[55];return;}else{++cov_23x0gbstu1.b[8][1];}const action:any=(++cov_23x0gbstu1.s[56],TEST_MENU[itemTitles[idx-1]]);++cov_23x0gbstu1.s[57];this.props.dispatch(action());});}}function select(state){++cov_23x0gbstu1.f[16];++cov_23x0gbstu1.s[58];return{nux:state.notifications.enabled===null,notifications:data(state),sessions:state.sessions,surveys:state.surveys};}function actions(dispatch){++cov_23x0gbstu1.f[17];++cov_23x0gbstu1.s[59];return{onTurnOnNotifications:()=>{++cov_23x0gbstu1.f[18];++cov_23x0gbstu1.s[60];return dispatch(turnOnPushNotifications());},onSkipNotifications:()=>{++cov_23x0gbstu1.f[19];++cov_23x0gbstu1.s[61];return dispatch(skipPushNotifications());},dispatch};}++cov_23x0gbstu1.s[62];module.exports=connect(select,actions)(F8NotificationsView);